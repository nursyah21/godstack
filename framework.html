framework js god mode
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>God Stack App</title>
    <style>
        :root{--p:#007bff;--b:#fff;--t:#333;--g:#f4f4f4}body{font-family:system-ui,sans-serif;line-height:1.6;color:var(--t);max-width:800px;margin:40px auto;padding:0 20px;background:var(--b)}button,.btn{background:var(--p);color:#fff;border:none;padding:10px 20px;border-radius:5px;cursor:pointer;transition:opacity .2s}button:hover{opacity:.8}input,select,textarea{width:100%;padding:8px;margin:8px 0;border:1px solid #ddd;border-radius:4px;box-sizing:border-box}table{width:100%;border-collapse:collapse;margin:20px 0}td,th{padding:12px;border-bottom:1px solid var(--g);text-align:left}th{background:var(--g)}a{color:var(--p)}
        nav { margin-bottom: 20px; padding: 10px; background: var(--g); border-radius: 8px; }
    </style>
</head>
<body>

    <nav>
        <a href="#/">Home</a> | <a href="#login">Login</a> | <a href="#data">Manage Data</a>
    </nav>

    <div id="app"></div>

    <template id="tpl-home">
        <h1>Selamat Datang</h1>
        <p>Aplikasi SPA minimalis dengan arsitektur God Stack.</p>
    </template>

    <template id="tpl-login">
        <h1>Login</h1>
        <form id="loginForm">
            <input name="email" type="email" placeholder="Email" required>
            <input name="password" type="password" placeholder="Password" required>
            <button type="submit">Masuk</button>
        </form>
    </template>

    <template id="tpl-data">
        <h1>Manajemen Item</h1>
        <form id="addForm">
            <input name="nama_item" placeholder="Tambah item baru..." required>
            <button type="submit">Simpan</button>
        </form>
        <table>
            <thead><tr><th>ID</th><th>Nama Item</th></tr></thead>
            <tbody id="list-container" data-tpl="<tr><td>{{id}}</td><td>{{nama_item}}</td></tr>"></tbody>
        </table>
    </template>

    <script>
        const $=(s)=>{const e=document.querySelectorAll(s),t={element:e.length===1?e[0]:[...e],html:s=>(e.forEach(e=>e.innerHTML=s),t),on:(s,l)=>(e.forEach(e=>e.addEventListener(s,l)),t),css:s=>(e.forEach(e=>Object.assign(e.style,s)),t),attr:(s,l)=>void 0===l?e[0]?e[0].getAttribute(s):null:(e.forEach(e=>e.setAttribute(s,l)),t),serialize:()=>{const s={};return e.forEach(e=>{"FORM"===e.tagName&&new FormData(e).forEach((e,t)=>s[t]=e)}),s},render:(s)=>{e.forEach(e=>{let l=e.getAttribute("data-tpl")||e.innerHTML;e.getAttribute("data-tpl")||e.setAttribute("data-tpl",l);e.innerHTML=Array.isArray(s)?s.map(s=>l.replace(/\{\{(.*?)\}\}/g,(e,t)=>s[t.trim()]||"")).join(""):l.replace(/\{\{(.*?)\}\}/g,(e,t)=>s[t.trim()]||"")});return t}};return t};$.ajax=async({url:s,method:e="GET",data:t=null,headers:l={},success:a,error:r})=>{try{const n=e.toUpperCase(),c=await fetch(s,{method:n,headers:{"Content-Type":"application/json",...l},..."GET"!==n&&t?{body:JSON.stringify(t)}:{}});if(!c.ok)throw Error(`HTTP error! status: ${c.status}`);const d=await c.json();return a&&a(d),d}catch(s){if(r)r(s);throw s}};$.state=(s,e)=>new Proxy(s,{set:(s,t,l)=>(s[t]=l,e(s),!0)});$.route=(r)=>{const l=()=>{const s=location.hash.slice(1)||"/",a=r[s]||r["404"];a&&a()};window.onhashchange=l;l()};

        const SB_URL = "https://PROJECT_ID.supabase.co";
        const SB_KEY = "YOUR_ANON_KEY";
        const authHeader = () => ({ "apikey": SB_KEY, "Authorization": `Bearer ${localStorage.getItem('sb-token') || SB_KEY}` });

        const store = $.state({ items: [] }, (s) => $('#list-container').render(s.items));

        $.route({
            '/': () => $('#app').html($('#tpl-home').innerHTML),
            'login': () => {
                $('#app').html($('#tpl-login').innerHTML);
                $('#loginForm').on('submit', async (e) => {
                    e.preventDefault();
                    $.ajax({
                        url: `${SB_URL}/auth/v1/token?grant_type=password`,
                        method: 'POST', data: $('#loginForm').serialize(), headers: { "apikey": SB_KEY },
                        success: (res) => {
                            localStorage.setItem('sb-token', res.access_token);
                            location.hash = 'data';
                        },
                        error: () => alert("Login Gagal!")
                    });
                });
            },
            'data': async () => {
                $('#app').html($('#tpl-data').innerHTML);
                $.ajax({
                    url: `${SB_URL}/rest/v1/items?select=*`,
                    headers: authHeader(),
                    success: (data) => store.items = data
                });
                $('#addForm').on('submit', async (e) => {
                    e.preventDefault();
                    $.ajax({
                        url: `${SB_URL}/rest/v1/items`,
                        method: 'POST', data: $('#addForm').serialize(), headers: authHeader(),
                        success: () => location.reload()
                    });
                });
            }
        });
    </script>
</body>
</html>

-- 1. Buat Tabel Items
CREATE TABLE items (
  id uuid DEFAULT gen_random_uuid() PRIMARY KEY,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  nama_item TEXT NOT NULL,
  user_id uuid REFERENCES auth.users NOT NULL DEFAULT auth.uid()
);

-- 2. Aktifkan Row Level Security (RLS)
ALTER TABLE items ENABLE ROW LEVEL SECURITY;

-- 3. Policy: Siapa saja boleh melihat data (Public Read)
CREATE POLICY "Semua orang bisa lihat" 
ON items FOR SELECT 
USING (true);

-- 4. Policy: Hanya user yang login yang bisa menambah data
CREATE POLICY "User terautentikasi bisa tambah" 
ON items FOR INSERT 
WITH CHECK (auth.role() = 'authenticated');

-- 5. Policy: Hanya pemilik data yang bisa mengubah/menghapus
CREATE POLICY "Hanya pemilik yang bisa ubah/hapus" 
ON items FOR ALL 
USING (auth.uid() = user_id);


{
  "version": 2,
  "cleanUrls": true,
  "rewrites": [
    { 
      "source": "/(.*)", 
      "destination": "/index.html" 
    }
  ]
}
